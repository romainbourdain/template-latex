\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{amsmath, amssymb}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{float}
\usepackage[section]{placeins}
\usepackage[justification=centering]{caption}
\usepackage{subcaption}
\usepackage{wallpaper}
\usepackage{nomencl}
\usepackage{fancyhdr}
\usepackage{url}
\usepackage{siunitx}
\usepackage{lipsum}
\usepackage[left=3cm,right=3cm,top=3cm,bottom=5cm]{geometry}
\usepackage{csquotes}
\usepackage[backend=biber,style=numeric,sorting=ynt]{biblatex}
\usepackage{ragged2e}
\usepackage{parskip}
\usepackage{csquotes}
\usepackage{tocloft}

\setlength{\parskip}{1em}
\setlength{\parindent}{1.5em}

% ---------- Page de garde -----------
\newcommand{\logoentreprise}[1]{\renewcommand{\logoentreprise}{#1}}
\newcommand{\nomentreprise}[1]{\renewcommand{\nomentreprise}{#1}}

\newcommand{\titre}[1]{\renewcommand{\titre}{#1}}
\newcommand{\intitule}[1]{\renewcommand{\intitule}{#1}}

\newcommand{\trigrammemention}[1]{\renewcommand{\trigrammemention}{#1}}
\newcommand{\master}[1]{\renewcommand{\master}{#1}}
\newcommand{\filiere}[1]{\renewcommand{\filiere}{#1}}

\newcommand{\eleve}[1]{\renewcommand{\eleve}{#1}}

\newcommand{\dates}[1]{\renewcommand{\dates}{#1}}

\newcommand{\promo}[1]{\renewcommand{\promo}{#1}}

\newcommand{\annee}[1]{\renewcommand{\annee}{#1}}

\newcommand{\tuteurecole}[1]{\renewcommand{\tuteurecole}{#1}}
\newcommand{\tuteurentreprise}[1]{\renewcommand{\tuteurentreprise}{#1}}

% Formatte les pages (header, marges, image, ...)
\newcommand{\fairemarges}{
    \makenomenclature{}
    \pagestyle{fancy}
    \fancyheadoffset{1cm}
    \setlength{\headheight}{2cm}
    \lhead{\includegraphics[scale=0.5]{figures/cover/tps.png}}
    \rhead{\nouppercase{\leftmark}}
    \rfoot{\thepage}
    \cfoot{}
    \lfoot{\trigrammemention}
}

% Créer la page de garde
\newcommand{\fairepagedegarde}{
    \begingroup
    \setlength{\parskip}{0em}
    \setlength{\parindent}{0em}
    \begin{titlepage}

        \centering{} %Centraliser le contenu

        % Logo Entreprise x ecole
        \begin{figure}
            \begin{subfigure}{.5\textwidth}
                \centering{}
                \includegraphics[width=0.6\textwidth]{figures/cover/tps.png}\par\vspace{1cm}
            \end{subfigure}%
            \begin{subfigure}{.5\textwidth}
                \centering{}
                \includegraphics[width=0.6\textwidth]{figures/cover/imt.png}\par\vspace{1cm} %%
            \end{subfigure}
        \end{figure}

        \vspace{0.5cm}
        {\scshape{} \intitule{} \par}
        \vspace{0.5cm}

        % Titre du rapport
        \rule{\linewidth}{0.2 mm} \\[0.4 cm]
        {\large{}\bfseries{} \titre{} \par} \
        \rule{\linewidth}{0.2 mm} \\[1.0 cm]

        % Nom de l'étudiant
        {\eleve{} \par}
        \vspace{1.0cm}

        % Promotion
        {\scshape{} Promotion \promo{} \par}
        \vspace{1.0cm}

        % Parcours de l'étudiant
        {\scshape{} \filiere{} \\ \master{} \par}
        \vspace{1cm}

        % Année universitaire
        {\large{} \annee{} \par}
        \vspace{1cm}

        % Dates
        {\large{} \dates{} \par}
        \vspace{1.5cm}

        % Bas de page
        \begin{minipage}[t]{0.4\textwidth}
            \begin{flushleft}
                \emph{\textbf{Organisme d'accueil}}\\
                \text{\nomentreprise}\\
                \includegraphics*[width=0.4\textwidth]{\logoentreprise} \\
            \end{flushleft}
        \end{minipage}
        ~
        \begin{minipage}[t]{0.4\textwidth}
            \begin{flushright}
                \emph{\textbf{Tuteur école :}} \\
                \tuteurecole{} \\
            \end{flushright}
            \begin{flushright}
                \emph{\textbf{Tuteur entreprise :}} \\
                \tuteurentreprise{} \\
            \end{flushright}
        \end{minipage}\\[2cm]

        \vfill{}


    \end{titlepage}
    \newpage{}
    \endgroup
}

% Table des matières
\newcommand{\tabledematieres}{
    \tableofcontents{}
    \newpage{}
}